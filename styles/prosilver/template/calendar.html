{%- include 'overall_header.html' -%}

<p>
	{{- CURRENT_TIME -}}
</p>

<h2>
	{{- lang('MARTTIPHPBB_CALENDARTABLEVIEW_CALENDAR') -}}
</h2>

<div class="calendartableview">
	{%- include '@marttiphpbb_calendartableview/include/pagination.html' -%}
	<div class="tables">
	{%- for t in tables -%}
		<table>
			{%- for m in t.months -%}
				<colgroup class="{{- m.MONTH_CLASS }} month-{%- if m.MONTH is even %}even{% else %}odd{% endif %}">
					{%- for day in m.days -%}
						<col class="{{- day.WEEKDAY_CLASS -}}">
					{%- endfor -%}
				</colgroup>
			{%- endfor -%}
			{%- if t.header_rows -%}
				<thead>
					{%- for h in t.header_rows -%}

						{%- embed '@marttiphpbb_calendartableview/include/header_row.html' -%}
						{%- endembed -%}

					{%- endfor -%}
				</thead>
			{%- endif -%}

			{%- for eb in event_bodies -%}
				<tbody>
				{%- for er in eb.event_rows -%}
					<tr>
					{%- for c in er.cells -%}
						{%- if c.ROWSPAN -%}
							<td{%- if c.ROWSPAN > 1 %} rowspan="{{- c.ROWSPAN -}}"{%- endif -%}>
								&nbsp;
							</td>
						{%- elseif c.TOPIC_ID -%}
							<td class="calendar-event forum-{{ c.FORUM_ID -}}{% if TOPIC_HILIT == c.TOPIC_ID %} topic-hilit{%- endif -%}" data-topic="{{- c.TOPIC_ID -}}" data-forum="{{- c.FORUM_ID -}}"{%- if c.SPAN > 1 %} colspan="{{- c.SPAN -}}"{%- endif -%}>
								<a href="{{- c.TOPIC_LINK -}}" title="{{- c.TOPIC_TITLE -}}">
									{{- c.TOPIC_TITLE -}}
								</a>
							</td>
						{%- endif -%}
					{%- endfor -%}
					</tr>
				{%- endfor -%}
				</tbody>

				{%- if t.repeated_header_rows and not loop.last -%}
					<tbody class="repeated-header">
						{%- for h in t.repeated_header_rows -%}
							{%- embed '@marttiphpbb_calendartableview/include/header_row.html' -%}
								{%- block cell_tag -%}
									td
								{% endblock -%}
							{%- endembed -%}
						{%- endfor -%}
					</tbody>
				{%- endif -%}

			{%- endfor -%}

			{%- if t.footer_rows -%}
				<tfoot>
					{%- for h in t.footer_rows -%}
						{%- embed '@marttiphpbb_calendartableview/include/header_row.html' -%}
						{%- endembed -%}
					{%- endfor -%}
				</tfoot>
			{%- endif -%}

		</table>

		{%- if not loop.last -%}
			<br>
		{%- endif -%}
	{%- endfor -%}

	</div>
	{%- include '@marttiphpbb_calendartableview/include/pagination.html' -%}
</div>

{%- include 'jumpbox.html' -%}
{%- include 'overall_footer.html' -%}

{%- if LOAD_STYLESHEET -%}
	{%- INCLUDECSS '@marttiphpbb_calendartableview/calendar.css' -%}
{%- endif -%}

{%- if EXTRA_STYLESHEET -%}
	{%- INCLUDECSS EXTRA_STYLESHEET -%}
{%- endif -%}

{%- INCLUDEJS '@marttiphpbb_calendartableview/js/calendar.js' -%}
